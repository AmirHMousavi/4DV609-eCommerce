# Item Service
The item service provides the service calls; getItem(itemId), getAllItems(), getAllItemsBy(userId), createItem(), getImage(itemId), createImage(itemId), downloadImage(itemId), uploadImage(itemId), and setSold(itemId). All these calls return ServiceCall. 
### Service calls
```sh
ServiceCall<NotUsed, Item> getItem(String id) 
```
This is only used to return only one item. The parameter 'id' represents item id for which the service call give the response as 'Item' immutable object. 
```sh
ServiceCall<NotUsed, PSequence<Item>> getAllItems()
```
The method call is used for to return a list of items, in the response.
* PSequence<Item> represents list of of items in the response body.
```sh
 ServiceCall<NotUsed, PSequence<Item>> getAllItemsBy(String userId)
```
The call is used to get the list of of advertized items by specifying userId as a parameter.
* PSequence<Item> represents list of of items in the response body.
```sh
ServiceCall<CreateItemRequest, CreateItemResponse> createItem() 
```
The call is to create an item, which needed to be advertized.
* `CreateItemRequest` is an immutable class generated by AbstractCreateItemRequest,
* `CreateItemResponse` is an immutable class generated by AbstractCreateItemResponse
```sh
ServiceCall<Source<ByteString,?>, String> uploadImage(String id)
```
The method call takes image as stream of bytes and saves into local storage of service. And image is recognized by item id 'id'.
```sh
ServiceCall<NotUsed, Source<ByteString,?>> downloadImage(String id)
```
The method call is used for to send the photo of item having id 'id' to the client, as stream of bytes.

### implementation

##### Folder Structure
```sh
org
    +---ecommerce
        +---item
            +---impl
                    AbstractItemState.java
                    ItemCommand.java
                    ItemEntity.java
                    ItemEvent.java
                    ItemEventProcessor.java
                    ItemEventTag.java
                    ItemModule.java
                    ItemServiceImpl.java
```
##### ItemServiceImpl.java
This class 'ItemServiceImpl' is providing an implementation of the service descriptor interface, implementing each call specified by that descriptor.
* `CreateItem` is command set in ItemEntity. The command execution results in ItemCreated event. The event then notifies ItemEventProcessor to prepare read-side database. to list all existing item with the new item just created.
* `getItem` is a read-only command and replies to the GET request by returning the getItemReply of Item object. the command is handled by setting ReadOnlyCommandHandler.
* `getAllItems` is a direct query from readside. An instance of the cassandraSession is injected in the ItemServiceImpl and a completionStage with a collection of item are returned regarding the query `selectAll("SELECT * FROM item")`
